#!/usr/bin/env ruby

require "bundler/setup"

# require dependencies from gemspec
require "active_record"
require "aws-sdk-s3"
require "pp"
require "yaml"

dbspec_location = "bin/dbspec.yml"

if File.exist?(dbspec_location)
  dbspec = YAML.load_file(dbspec_location)
  ActiveRecord::Base.establish_connection(dbspec)
  ActiveRecord::Base.connection
end

require "batch_archiving"

storage_options = YAML.load_file("config/batch_archiving_rspec.yml")
::BatchArchiving::Storage.configure(storage: :aws_s3, storage_options: storage_options)

require "irb"
IRB.start(__FILE__)
